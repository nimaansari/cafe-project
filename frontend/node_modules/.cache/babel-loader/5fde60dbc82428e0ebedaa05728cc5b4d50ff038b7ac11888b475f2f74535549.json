{"ast":null,"code":"import React,{useContext,useState,useEffect}from'react';import'./HomePage.css';import menuItems from'../data/menuItems';import{cartContext}from'../context/CartContext.jsx';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=()=>{const{cartItems,addCart,clearCart}=useContext(cartContext);//Buy to Cart\nconst[message,setMessage]=useState(\"\");const buyOrder=async()=>{try{await axios.post('http://localhost:5000/api/v1/orders',{items:cartItems,placedAt:new Date().toISOString()},{withCredentials:true});setMessage(\"Order placed!\");clearCart();}catch(error){setMessage(\"Failed to place order!\");}};//Order History\nconst[orders,setOrders]=useState([]);useEffect(()=>{const fetchOrders=async()=>{try{const res=await axios.get('http://localhost:5000/orders');setOrders(res.data);}catch(error){console.error(\"failed to load order history: \",error);}};fetchOrders();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"navbar\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Coffee Bar\"})}),/*#__PURE__*/_jsxs(\"section\",{className:\"cart-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Cart\"}),cartItems.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"You have not chosen any items.\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"ul\",{children:cartItems.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[item.name,\" - $\",item.price]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:buyOrder,children:\"Place Order\"}),message&&/*#__PURE__*/_jsx(\"p\",{children:message})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"menu\",children:menuItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:item.name}),/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"ul\",{className:\"ingredientList\",children:item.ingredients.map((ingredient,idx)=>/*#__PURE__*/_jsx(\"li\",{children:ingredient},idx))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addCart(item),children:\"Add to Cart\"})]},item.id))}),/*#__PURE__*/_jsxs(\"section\",{className:\"order-history\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order History\"}),orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No past orders yet.\"}):orders.map((order,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Placed At:\"}),\" \",new Date(order.placedAt).toLocaleString()]}),/*#__PURE__*/_jsx(\"ul\",{children:order.items.map((item,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[item.name,\" - $\",item.price]},i))})]},index))]})]});};export default HomePage;","map":{"version":3,"names":["React","useContext","useState","useEffect","menuItems","cartContext","axios","jsx","_jsx","jsxs","_jsxs","HomePage","cartItems","addCart","clearCart","message","setMessage","buyOrder","post","items","placedAt","Date","toISOString","withCredentials","error","orders","setOrders","fetchOrders","res","get","data","console","children","className","length","map","item","index","name","price","onClick","src","image","alt","ingredients","ingredient","idx","id","order","toLocaleString","i"],"sources":["/home/nima/Desktop/school/langaraCollege/summer2025/Full-stack-Development/cafe-appGithuyb/cafe-project/frontend/src/components/HomePage.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport './HomePage.css';\nimport menuItems from '../data/menuItems';\nimport { cartContext } from '../context/CartContext.jsx';\nimport axios from 'axios';\n\nconst HomePage = () => {\n    const { cartItems, addCart, clearCart } = useContext(cartContext);\n\n    //Buy to Cart\n    const [message, setMessage] = useState(\"\");\n    const buyOrder = async () => {\n        try{\n            await axios.post('http://localhost:5000/api/v1/orders', {\n                items: cartItems,\n                placedAt: new Date().toISOString()\n            },\n            {\n                withCredentials: true\n            }\n        );\n            setMessage(\"Order placed!\");\n            clearCart();\n        }\n        catch(error){\n            setMessage(\"Failed to place order!\");\n        }\n    }\n\n    //Order History\n    const [orders, setOrders] = useState([]);\n    useEffect(() => {\n        const fetchOrders = async() => {\n            try{\n                const res = await axios.get('http://localhost:5000/orders');\n                setOrders(res.data);\n            }\n            catch(error){\n                console.error(\"failed to load order history: \", error);\n            }\n        };\n        fetchOrders();\n    }, []);\n\n\n    return (\n        <div>\n            <header className='navbar'>\n                <h1>Coffee Bar</h1>\n            </header>\n\n            {/* Cart */}\n            <section className='cart-section'>\n                <h2>Your Cart</h2>\n                {cartItems.length === 0 ? (\n                    <p>You have not chosen any items.</p>\n                ) : (\n                    <div>\n                        <ul>\n                            {cartItems.map((item, index) => (\n                                <li key={index}>{item.name} - ${item.price}</li>\n                            ))}\n                        </ul>\n                        <button onClick={buyOrder}>Place Order</button>\n                        {message && <p>{message}</p>}\n                    </div>\n                )}\n            </section>\n\n            {/* Menu */}\n            <main className='menu'>\n                {menuItems.map(item => (\n                    <div className='card' key={item.id}>\n                        <h2>{item.name}</h2>\n                        <img src={item.image} alt={item.name} />\n                        <p>${item.price}</p>\n                        <ul className='ingredientList'>\n                            {item.ingredients.map((ingredient, idx) => (\n                                <li key={idx}>{ingredient}</li>\n                            ))}\n                        </ul>\n                        <button onClick={() => addCart(item)}>Add to Cart</button>\n                    </div>\n                ))}\n            </main>\n\n            {/* Order History */}\n            <section className='order-history'>\n                <h2>Order History</h2>\n                {orders.length === 0 ? (\n                    <p>No past orders yet.</p>\n                ) : (\n                    orders.map((order, index) => (\n                        <div key={index}>\n                            <p><strong>Placed At:</strong> {new Date(order.placedAt).toLocaleString()}</p>\n                            <ul>\n                                {order.items.map((item, i) => (\n                                    <li key={i}>{item.name} - ${item.price}</li>\n                                ))}\n                            </ul>\n                        </div>\n                    ))\n                )}\n            </section>\n        </div>\n    );\n}\n\nexport default HomePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}